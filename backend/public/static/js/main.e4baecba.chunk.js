(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,a,t){},242:function(e,a,t){e.exports=t(558)},247:function(e,a,t){},307:function(e,a){},309:function(e,a){},341:function(e,a){},342:function(e,a){},410:function(e,a){},556:function(e,a,t){},558:function(e,a,t){"use strict";t.r(a);var n,r=t(0),o=t.n(r),c=t(99),l=t.n(c),s=(t(247),t(6)),i=t(7),m=t(9),p=t(8),u=t(10),d=t(565),h=t(561),b=t(16),E=t.n(b),g=t(560),y=t(23),v=t.n(y);v.a.accessToken="pk.eyJ1IjoiZGl1cml2aiIsImEiOiJjanAxdjA2cTQwMGp1M2tvYzZmZGp3bWc3In0.4cZEyLkU2ikqx_wb4A1z8A";var f,j=function(e){function a(){var e,t;Object(s.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(o)))).state={user:{},totals:{jobType:[],address:{alcaldia:[]},company:{name:[],companyType:[]}},zoom:12,jobs:[{address:{location:{}},company:{},apply:{}}]},t.getJobs=function(){E.a.get("https://trabajocerca.herokuapp.com/api/trabajos"+t.props.location.search,{withCredentials:!0}).then(function(e){t.setState({jobs:e.data}),t.getMap()}).catch(function(e){console.log(e)})},t.getTotals=function(e){E.a.get("https://trabajocerca.herokuapp.com/api/totals?"+e,{withCredentials:!0}).then(function(a){var n=t.state.totals;"address.alcaldia"===e?n.address.alcaldia=a.data:"company.name"===e?n.company.name=a.data:"company.companyType"===e?n.company.companyType=a.data:n[e]=a.data,t.setState({totals:n})}).catch(function(e){console.log(e)})},t.getMarker=function(e,a,t,r,o){new v.a.Marker({color:"red"}).setLngLat([e,a]).setPopup(new v.a.Popup({offset:25}).setHTML("<a href='/trabajo/"+o+"'><h3>"+t+"</h3><p>"+r+"</p></a>")).addTo(n)},t.setMarkers=function(){t.state.jobs.forEach(function(e){t.getMarker(e.address.location.lng,e.address.location.lat,e.position,e.company.name,e._id)})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getJobs(),this.getTotals("jobType"),this.getTotals("address.alcaldia"),this.getTotals("company.name"),this.getTotals("company.companyType")}},{key:"getMap",value:function(){var e=this.state.jobs[0].address.location,a=e.lng,t=e.lat;n=new v.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",center:[a,t],zoom:12}),this.setMarkers()}},{key:"render",value:function(){var e=this,a=this.state,t=a.jobs,n=a.totals;return o.a.createElement("div",null,o.a.createElement("header",{className:"cover"},o.a.createElement("h2",null,"Encuentra trabajo en CDMX"),o.a.createElement("p",null,"Sin colas, s\xe9 el primero en aplicar.")),o.a.createElement("section",{className:"container job-container"},o.a.createElement("div",{className:"shortlink-container"},"Top vacantes:",n.jobType.map(function(e,a){return o.a.createElement(g.a,{key:a,to:"/trabajos/?jobType=".concat(e._id),className:"shortlinks"},e._id," (",e.count,")")})),o.a.createElement("div",{className:"shortlink-container"},"Top zonas:",n.address.alcaldia.map(function(e,a){return o.a.createElement(g.a,{key:a,to:"/trabajos/?address.alcaldia=".concat(e._id),className:"shortlinks"},e._id," (",e.count,")")})),o.a.createElement("div",{className:"shortlink-container"},"Top sectores:",n.company.companyType.map(function(e,a){return o.a.createElement(g.a,{key:a,to:"/trabajos/?company.companyType=".concat(e._id),className:"shortlinks"},e._id," (",e.count,")")})),o.a.createElement("div",{className:"shortlink-container"},"Top empresas:",n.company.name.map(function(e,a){return o.a.createElement(g.a,{key:a,to:"/trabajos/?company.name=".concat(e._id),className:"shortlinks"},e._id," (",e.count,")")})),o.a.createElement("div",{style:{width:"100%",height:"300px"},ref:function(a){return e.mapContainer=a}})),o.a.createElement("h2",{className:"center"},"\xdaltimas vacantes"),o.a.createElement("section",{className:"container job-container"},t.map(function(e,a){return o.a.createElement("div",{key:a,className:"job-card"},o.a.createElement("div",null,o.a.createElement(g.a,{to:"/trabajo/".concat(e._id)},o.a.createElement("img",{src:e.image,alt:e.position}))),o.a.createElement("div",null,o.a.createElement("h3",null,e.company.name),o.a.createElement("p",null," ",o.a.createElement(g.a,{to:"/trabajos/?address.alcaldia=".concat(e.address.alcaldia)},e.address.alcaldia))))})))}}]),a}(o.a.Component);v.a.accessToken="pk.eyJ1IjoiZGl1cml2aiIsImEiOiJjanAxdjA2cTQwMGp1M2tvYzZmZGp3bWc3In0.4cZEyLkU2ikqx_wb4A1z8A";var C=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={job:{address:{location:{}},company:{},apply:{onsite:""}},zoom:12},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentWillMount",value:function(){var e=this,a=this.props.match.params.id;console.log(this.props.match.params),E.a.get("https://trabajocerca.herokuapp.com/api/vacante/"+a,{withCredentials:!0}).then(function(a){document.title=a.data.position+" en "+a.data.company.name,e.setState({job:a.data}),e.getMap()}).catch(function(e){console.log(e)})}},{key:"getMap",value:function(){var e=this.state.job.address.location,a=e.lng,t=e.lat;f=new v.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",center:[a,t],zoom:14}),new v.a.Marker({color:"red"}).setLngLat([a,t]).addTo(f)}},{key:"render",value:function(){var e=this,a=this.state.job;return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,a.position),o.a.createElement("p",null,"En"," ",o.a.createElement(g.a,{to:"/trabajos/?address.alcaldia=".concat(a.address.alcaldia)},a.address.alcaldia),","," ",o.a.createElement(g.a,{to:"/trabajos/?address.ciudad=".concat(a.address.ciudad)},a.address.ciudad)),o.a.createElement("div",{className:"form-container"},a.description&&o.a.createElement("h3",null,"Descripcion de la vacante"),a.jobType&&o.a.createElement("p",null,"Tipo de trabajo:",o.a.createElement(g.a,{to:"/trabajos/?jobType=".concat(a.jobType)},a.jobType)),a.description&&o.a.createElement("p",null,a.description),a.requirements&&o.a.createElement("h3",null,"Requisitos"),a.requirements&&o.a.createElement("p",null,a.requirements),o.a.createElement("h3",null,"Imagen de la vacante"),o.a.createElement("img",{src:a.image,alt:a.position})),o.a.createElement("div",{className:"form-container"},o.a.createElement("h3",null,"Empresa"),o.a.createElement("p",null,o.a.createElement(g.a,{to:"/trabajos/?company.name=".concat(a.company.name)},a.company.name)),a.company.companyType&&o.a.createElement("p",null,"Tipo de empresa:"," ",o.a.createElement(g.a,{to:"/trabajos/?company.companyType=".concat(a.company.companyType)},a.company.companyType)),a.address.direccion&&o.a.createElement("p",null,"Direccion: ",a.address.direccion),a.address.alcaldia&&o.a.createElement("p",null,"Alcaldia:"," ",o.a.createElement(g.a,{to:"/trabajos/?address.alcaldia=".concat(a.address.alcaldia)},a.address.alcaldia)),a.address.ciudad&&o.a.createElement("p",null,"Ciudad:"," ",o.a.createElement(g.a,{to:"/trabajos/?address.ciudad=".concat(a.address.ciudad)},a.address.ciudad)),a.address.pais&&o.a.createElement("p",null,"Pais: ",a.address.pais),o.a.createElement("div",{style:{width:"100%",height:"300px"},ref:function(a){return e.mapContainer=a}})),o.a.createElement("div",{className:"form-container"},o.a.createElement("h3",null,"Como aplicar"),a.apply.onsite&&o.a.createElement("p",null,"Presencialmente"),a.apply.whatsapp&&o.a.createElement("p",null,"Por Whatsapp:"," ",o.a.createElement("a",{href:"https://wa.me/".concat(a.apply.whatsapp)},a.apply.whatsapp)),a.apply.phone&&o.a.createElement("p",null,"Por telefono:"," ",o.a.createElement("a",{href:"tel:".concat(a.apply.phone)},a.apply.phone))))}}]),a}(o.a.Component),k=t(235),O=t.n(k);v.a.accessToken="pk.eyJ1IjoiZGl1cml2aiIsImEiOiJjanAxdjA2cTQwMGp1M2tvYzZmZGp3bWc3In0.4cZEyLkU2ikqx_wb4A1z8A";var T,w=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={lng:-99.4238064,lat:19.300519,zoom:8,job:{address:{location:{}},company:{}},isEnabled:!1},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=this.state,t=a.lng,n=a.lat,r=a.zoom,o=a.job,c=new O.a({accessToken:v.a.accessToken,countries:"mx"});new v.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",center:[t,n],zoom:r}).addControl(c),c.on("result",function(a){var t=a.result;o.address.location.coords=t.geometry.coordinates||"",o.address.location.lng=t.geometry.coordinates[0]||"",o.address.location.lat=t.geometry.coordinates[1]||"","poi"===t.place_type[0]?(o.company.name=t.text||"",o.address.direccion=t.properties.address||""):"address"===t.place_type[0]&&(o.address.direccion=t.text||""+t.address||"");for(var n=0;n<t.context.length;n++)/postcode.*/.test(t.context[n].id)?o.address.postalCode=t.context[n].text:/locality.*/.test(t.context[n].id)?o.address.alcaldia=t.context[n].text:/place.*/.test(t.context[n].id)?o.address.ciudad=t.context[n].text:/region.*/.test(t.context[n].id)?o.address.estado=t.context[n].text:/country.*/.test(t.context[n].id)&&(o.address.pais=t.context[n].text);e.setState({job:o,isEnabled:!0}),localStorage.setItem("job",JSON.stringify(o))})}},{key:"render",value:function(){var e=this,a=this.props.updateCurrent,t=this.state.isEnabled;return o.a.createElement("div",{className:"form-container"},o.a.createElement("h4",null,"Lugar de trabajo"),o.a.createElement("p",null,"Escoge en el mapa el negocio que esta contratando para esta posicion. Puedes buscar por el nombre del negocio o la calle y el numero."),o.a.createElement("div",{style:{width:"100%",height:"300px"},ref:function(a){return e.mapContainer=a}}),o.a.createElement("button",{disabled:!t,onClick:function(){return a(2)},className:"btn btn-positive"},"Confirmar"),!t&&o.a.createElement("p",null,"Selecciona en el mapa la empresa que esta contratando antes de seguir."))}}]),a}(r.Component),x=t(562),N=x.a.Step,M=function(e){var a=e.current;return o.a.createElement("div",{className:"form-progress"},o.a.createElement(x.a,{size:"small",current:a},o.a.createElement(N,{title:"Sube la oferta",description:"Toma una foto del cartel"}),o.a.createElement(N,{title:"Indica la empresa",description:"Indica donde tomaste la foto"}),o.a.createElement(N,{title:"Confirma los detalles",description:"Completa la informaci\xf3n que falta"})))},S=t(146),q=t.n(S),I=(t(554),"https://trabajocerca.herokuapp.com/api/upload"),A=E.a.create({url:I,withCredentials:!0}),P=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={loading:!1,cameraOn:!1,image:{},laimage:""},t.handleChange=function(e){t.setState({loading:!0});var a=e.target.files[0];t.sendPhoto(a)},t.cameraOn=function(){t.state.cameraOn?t.setState({cameraOn:!1}):t.setState({cameraOn:!0})},t.sendToServer=function(e,a){var t=new FormData;return t.append("image",e),A.post(a,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e}).catch(function(e){return console.log(e)})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"sendPhoto",value:function(e){var a=this;this.sendToServer(e,I).then(function(t){a.props.handleImage(t.data.image),E.a.get("https://api.ocr.space/parse/imageurl?apikey=ab48b0421688957&language=spa&detectOrientation=true&url="+t.data.api).then(function(e){a.props.handleImageText(e.data.ParsedResults[0].ParsedText),a.props.updateCurrent(1)}).catch(function(e){return console.log(e)}),a.setState({image:e})}).catch(function(e){return console.log(e)})}},{key:"onTakePhoto",value:function(e){var a=this;fetch(e).then(function(e){return e.blob()}).then(function(e){var t=new File([e],"File name");a.sendPhoto(t)})}},{key:"render",value:function(){var e=this,a=this.state,t=a.loading,n=a.cameraOn;return o.a.createElement("div",{className:"form-container"},o.a.createElement("div",null,o.a.createElement("p",null,"Sube una imagen que ya has tomado o toma una ahora. Extraeremos el texto de la imagen para que no tengas que escribir tanto :)"),t&&o.a.createElement("p",{className:"loading"},"Subiendo la imagen"),o.a.createElement("input",{type:"file",accept:"image/*",onChange:this.handleChange,name:"image"}),n&&o.a.createElement(q.a,{idealFacingMode:S.FACING_MODES.ENVIRONMENT,onTakePhoto:function(a){e.onTakePhoto(a)}}),o.a.createElement("button",{className:"btn btn-positive",onClick:this.cameraOn},"Tomar foto")))}}]),a}(o.a.Component),_=t(566),L=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={job:{jobType:"Tipo de trabajo",gender:"Genero",address:{location:{}},company:{companyType:"Tipo de empresa"},apply:{onsite:"",whatsapp:"",phone:"",email:""}},isEnabled:!1},t.handleChange=function(e){var a=t.state,n=a.job,r=a.isEnabled;(n.apply.onsite.length>0||n.apply.email.length>0||n.apply.whatsapp.length>0||n.apply.phone.length>0)&&(r=!0),e.target.name.includes("apply.")?n.apply[e.target.name.split(".")[1]]=e.target.value:e.target.name.includes("company.")?n.company[e.target.name.split(".")[1]]=e.target.value:e.target.name.includes("address.")?n.address[e.target.name.split(".")[1]]=e.target.value:n[e.target.name]=e.target.value,t.setState({job:n,isEnabled:r})},t.handleSubmit=function(){var e=t.state.job;E.a.post("https://trabajocerca.herokuapp.com/api/nuevo",e,{withCredentials:!0}).then(function(e){return t.props.history.push("/trabajo/".concat(e.data.job._id))}).catch(function(e){return console.log(e)})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("job"));this.props.image&&(e.image=this.props.image),e.description=this.props.job.description,e.apply={onsite:"",whatsapp:"",phone:"",email:""},this.setState({job:e})}},{key:"render",value:function(){var e=this.state.isEnabled;return o.a.createElement("section",null,o.a.createElement("div",{className:"form-container"},o.a.createElement("h3",null,"Oferta de trabajo"),o.a.createElement("p",null,"Cuanto mas detallada la oferta este, mas aplicantes tendra."),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"position"},"Posicion vacante"),o.a.createElement("input",{type:"text",name:"position",placeholder:"Posicion vacante",required:!0,onChange:this.handleChange})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"jobType"},"Tipo de posicion"),o.a.createElement("select",{name:"jobType",defaultValue:this.state.job.jobType,onChange:this.handleChange,required:!0},o.a.createElement("option",{value:"Tipo de trabajo",disabled:!0,hidden:!0},"Tipo de trabajo"),o.a.createElement("option",{value:"Ayudante de cocina"},"Ayudante de cocina"),o.a.createElement("option",{value:"Ayudante de tienda"},"Ayudante de tienda"),o.a.createElement("option",{value:"Ejecutivo de ventas"},"Ejecutivo de ventas"),o.a.createElement("option",{value:"Empleado general"},"Empleado general"),o.a.createElement("option",{value:"Gerente de tienda"},"Gerente de tienda"),o.a.createElement("option",{value:"Lavaloza"},"Lavaloza"),o.a.createElement("option",{value:"Mesero"},"Mesero"),o.a.createElement("option",{value:"Personal de cocina"},"Personal de cocina"),o.a.createElement("option",{value:"Personal de limpieza"},"Personal de limpieza"),o.a.createElement("option",{value:"Recepcionista"},"Recepcionista"))),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"gender"},"Preferencia de genero"),o.a.createElement("select",{name:"gender",defaultValue:this.state.job.gender,onChange:this.handleChange},o.a.createElement("option",{value:"",defaultValue:!0,disabled:!0,hidden:!0},"Genero"),o.a.createElement("option",{value:"indistinto"},"Indistinto"),o.a.createElement("option",{value:"mujer"},"Mujer"),o.a.createElement("option",{value:"hombre"},"Hombre"))),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"description"},"Descripcion de la vacante"),o.a.createElement("input",{type:"text",name:"description",placeholder:"Descripcion de la vacante",onChange:this.handleChange,defaultValue:this.state.job.description})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"requirements"},"Requisitos de la vacante"),o.a.createElement("input",{type:"text",name:"requirements",placeholder:"Requisitos",onChange:this.handleChange})),this.state.job.image&&o.a.createElement("p",null,"Imagen de la oferta:"),this.state.job.image&&o.a.createElement("img",{src:this.state.job.image,alt:"Oferta de trabajo"})),o.a.createElement("div",{className:"form-container"},o.a.createElement("h3",null,"Lugar de trabajo"),o.a.createElement("p",null,"Que empresa ofrece la vacante ?"),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"company.name"},"Nombre del a empresa"),o.a.createElement("input",{type:"text",name:"company.name",placeholder:"Nombre de la empresa",required:!0,defaultValue:this.state.job.company.name,onChange:this.handleChange})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"company.companyType"},"Tipo de empresa"),o.a.createElement("select",{name:"company.companyType",defaultValue:this.state.job.company.companyType,onChange:this.handleChange,required:!0},o.a.createElement("option",{value:"",defaultValue:!0,disabled:!0,hidden:!0},"Tipo de empresa"),o.a.createElement("option",{value:"Hotel"},"Hotel"),o.a.createElement("option",{value:"Tienda"},"Tienda"),o.a.createElement("option",{value:"Restaurante"},"Restaurante"),o.a.createElement("option",{value:"Otro"},"Otro"))),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"address.direccion"},"Direccion"),o.a.createElement("input",{type:"text",name:"address.direccion",placeholder:"Direccion",required:!0,defaultValue:this.state.job.address.direccion,onChange:this.handleChange})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"address.alcaldia"},"Alcaldia"),o.a.createElement("input",{type:"text",name:"address.alcaldia",placeholder:"Alcaldia",required:!0,defaultValue:this.state.job.address.alcaldia,onChange:this.handleChange})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"address.ciudad"},"Ciudad"),o.a.createElement("input",{type:"text",name:"address.ciudad",placeholder:"Ciudad",required:!0,defaultValue:this.state.job.address.ciudad,onChange:this.handleChange})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"address.estado"},"Estado"),o.a.createElement("input",{type:"text",name:"address.estado",placeholder:"Estado",required:!0,defaultValue:this.state.job.address.estado,onChange:this.handleChange})),o.a.createElement("p",null,o.a.createElement("label",{htmlFor:"address.pais"},"Pais"),o.a.createElement("input",{type:"text",name:"address.pais",placeholder:"Pais",required:!0,defaultValue:this.state.job.address.pais,onChange:this.handleChange}))),o.a.createElement("div",{className:"form-container"},o.a.createElement("h3",null,"Como aplicar"),o.a.createElement("p",null,"Elige por lo menos una de las formas para aplicar."),o.a.createElement("input",{type:"checkbox",name:"apply.onsite",onChange:this.handleChange}),"En persona",o.a.createElement("input",{type:"email",name:"apply.email",placeholder:"Email",required:!0,onChange:this.handleChange}),o.a.createElement("input",{type:"text",name:"apply.whatsapp",placeholder:"Whatsapp",required:!0,onChange:this.handleChange}),o.a.createElement("input",{type:"text",name:"apply.phone",placeholder:"Telefono",required:!0,onChange:this.handleChange})),!e&&o.a.createElement("p",null,"Define una forma para aplicar, por favor."),o.a.createElement("button",{disabled:!e,onClick:this.handleSubmit,className:"btn btn-positive"},"Confirmar"))}}]),a}(o.a.Component),z=Object(_.a)(L),D=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={current:0,image:{},job:{}},t.handleImage=function(e){t.setState({image:e})},t.handleImageText=function(e){var a=t.state.job;a.description=e,t.setState({job:a})},t.updateCurrent=function(e){t.setState({current:e})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){document.title="Crea una nueva oferta de trabajo"}},{key:"render",value:function(){var e=this.state,a=e.current,t=e.image,n=e.job;switch(a){case 0:return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Crear una nueva vacante"),o.a.createElement(M,{current:a}),o.a.createElement(P,{updateCurrent:this.updateCurrent,handleImage:this.handleImage,handleImageText:this.handleImageText}));case 1:return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Crear una nueva vacante"),o.a.createElement(M,{current:a}),o.a.createElement(w,{updateCurrent:this.updateCurrent}));case 2:return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Crear una nueva vacante"),o.a.createElement(M,{current:a}),o.a.createElement(z,{updateCurrent:this.updateCurrent,image:t,job:n}));default:return null}}}]),a}(o.a.Component),F=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={auth:{}},t.handleChange=function(e){var a=t.state.auth;a[e.target.name]=e.target.value,t.setState({auth:a})},t.sendToServer=function(){var e=t.state.auth;E.a.post("https://trabajocerca.herokuapp.com/auth/login",e,{withCredentials:!0}).then(function(e){console.log(e.data),window.location.replace("/")}).catch(function(e){alert("nanai")})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){document.title="Entra con tu cuenta"}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Entra con tu cuenta"),o.a.createElement("div",{className:"form-container"},o.a.createElement("input",{onChange:this.handleChange,placeholder:"email",name:"email",type:"email"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:this.handleChange,placeholder:"tu password",name:"password",type:"password"}),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.sendToServer,className:"btn btn-positive"},"Iniciar")))}}]),a}(o.a.Component),G=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={newUser:{},errors:{}},t.handleChange=function(e){var a=t.state,n=a.newUser,r=a.errors;n[e.target.name]=e.target.value,r={},n.password!==n.password2&&(r.password="no coinciden"),t.setState({newUser:n,errors:r})},t.sendToServer=function(){var e=t.state.newUser;E.a.post("https://trabajocerca.herokuapp.com/auth/signup",e).then(function(e){console.log("Nuevo usuario ? ",e),t.props.history.push("/login")}).catch(function(e){return console.log(e)})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){document.title="Crea una cuenta"}},{key:"render",value:function(){var e=this.state.errors;return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Crea tu cuenta"),o.a.createElement("div",{className:"form-container"},o.a.createElement("input",{onChange:this.handleChange,placeholder:"Email",name:"email",type:"email"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:this.handleChange,placeholder:"Contrasena",name:"password",type:"password"}),o.a.createElement("br",null),o.a.createElement("input",{onChange:this.handleChange,placeholder:"Repite tu contrasena",name:"password2",type:"password"}),o.a.createElement("p",{style:{color:"red"}},e.password),o.a.createElement("button",{onClick:this.sendToServer,className:"btn btn-positive"},"Crear cuenta")))}}]),a}(o.a.Component),V=t(564),J=function(e){function a(){return Object(s.a)(this,a),Object(m.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){E.a.get("https://trabajocerca.herokuapp.com/auth/logout",{withCredentials:!0}).then(function(e){console.log("Logged out"),window.location.replace("/")})}},{key:"render",value:function(){return o.a.createElement(V.a,{to:"/"})}}]),a}(o.a.Component),Z=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={user:{},jobs:[{address:{location:{}},company:{},apply:{}}]},t.getMarker=function(e,a,t,n,r){new v.a.Marker({color:"red"}).setLngLat([e,a]).setPopup(new v.a.Popup({offset:25}).setHTML("<a href='/trabajo/"+r+"'><h3>"+t+"</h3><p>"+n+"</p></a>")).addTo(T)},t.setMarkers=function(){t.state.jobs.forEach(function(e){t.getMarker(e.address.location.lng,e.address.location.lat,e.position,e.company.name,e._id)})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;E.a.get("https://trabajocerca.herokuapp.com/api/trabajos"+this.props.location.search,{withCredentials:!0}).then(function(a){document.title="Tus trabajos cerca  de ti",e.setState({jobs:a.data}),e.getMap()}).catch(function(e){console.log(e)})}},{key:"getMap",value:function(){var e=this.state.jobs[0].address.location,a=e.lng,t=e.lat;T=new v.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",center:[a,t],zoom:12}),this.setMarkers()}},{key:"render",value:function(){var e=this,a=this.state.jobs;return o.a.createElement("div",null,o.a.createElement("h2",{className:"center"},"\xdaltimas vacantes"),o.a.createElement("section",{className:"container job-container"},o.a.createElement("div",{style:{width:"100%",height:"300px"},ref:function(a){return e.mapContainer=a}}),a.map(function(e,a){return o.a.createElement("div",{key:a,className:"job-card"},o.a.createElement("div",null,o.a.createElement(g.a,{to:"/trabajo/".concat(e._id)},o.a.createElement("img",{src:e.image,alt:e.position}))),o.a.createElement("div",null,o.a.createElement("h3",null,e.company.name),o.a.createElement("p",null," ",e.address.alcaldia)))})))}}]),a}(o.a.Component),R=function(){return o.a.createElement(d.a,null,o.a.createElement(h.a,{exact:!0,path:"/",component:j}),o.a.createElement(h.a,{exact:!0,path:"/nuevo",component:D}),o.a.createElement(h.a,{exact:!0,path:"/login",component:F}),o.a.createElement(h.a,{exact:!0,path:"/signup",component:G}),o.a.createElement(h.a,{exact:!0,path:"/logout",component:J}),o.a.createElement(h.a,{path:"/trabajo/:id",component:C}),o.a.createElement(h.a,{path:"/trabajos/",component:Z}))},W=(t(144),function(e){function a(){return Object(s.a)(this,a),Object(m.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.props,a=e.url,t=e.text;return o.a.createElement(g.a,{to:a,title:t},t)}}]),a}(r.Component)),U=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(m.a)(this,Object(p.a)(a).call(this,e))).text=e.text,t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"top-menu-lead"},o.a.createElement(g.a,{to:"/"},this.text))}}]),a}(r.Component),Q=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={isLogged:!1,menu_class:"",search:""},t.checkLogged=function(){E.a.get("https://trabajocerca.herokuapp.com/auth/loggedin",{withCredentials:!0}).then(function(e){t.setState({isLogged:!0,user:e.data.user},function(e){})}).catch(function(e){return console.log(e)})},t.setToggleTopMenuClass=function(){""===t.state.menu_class?t.setState({menu_class:"toggled"}):t.setState({menu_class:""})},t.searchQuery=function(e){e.preventDefault();var a=e.target.value;E.a.post("https://trabajocerca.herokuapp.com/api/trabajos",{query:a}).then(function(e){t.props.history.push("/trabajos/?query=".concat(e.data.query))})},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.checkLogged()}},{key:"render",value:function(){var e=this.state.isLogged,a="top-menu ".concat(this.state.menu_class);return o.a.createElement("div",null,o.a.createElement("div",{className:a},o.a.createElement(U,{text:"Trabajo cerca"}),o.a.createElement("div",{className:"top-menu-icon",onClick:this.setToggleTopMenuClass},o.a.createElement("span",{role:"img","aria-label":"menu"},"\ud83c\udf54")),o.a.createElement("div",{className:"left"},o.a.createElement("form",{action:"/trabajos/"},o.a.createElement("input",{type:"text",name:"query",placeholder:"Busca por zona, empresa...",onSubmit:this.searchQuery,className:"search"}))),e?o.a.createElement("div",{className:"right"},o.a.createElement(W,{text:"Nueva vacante",url:"/nuevo"}),o.a.createElement(W,{text:"Logout",url:"/logout"})):o.a.createElement("div",{className:"right"},o.a.createElement(W,{text:"Crear cuenta",url:"/signup"}),o.a.createElement(W,{text:"Entrar",url:"/login"}))))}}]),a}(r.Component),H=Object(_.a)(Q),B=(t(556),function(e){function a(){return Object(s.a)(this,a),Object(m.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(H,null),o.a.createElement(R,null))}}]),a}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=t(563);t(557);l.a.render(o.a.createElement(function(){return o.a.createElement(Y.a,null,o.a.createElement(B,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[242,1,2]]]);
//# sourceMappingURL=main.e4baecba.chunk.js.map